(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5835:function(e,s,r){Promise.resolve().then(r.bind(r,2808))},2808:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return c}});var a=r(7437),t=r(2265),n=r(9222);let l=r(2601).env.NEXT_PUBLIC_API_URL||"http://localhost:3333/api";class o{async generateResponseSuggestions(e){try{return(await this.axiosInstance.post("/conversations/response-suggestions",e)).data}catch(e){throw console.error("Failed to generate response suggestions:",e),Error("返信文の提案生成に失敗しました")}}async testConnection(){try{return(await this.axiosInstance.get("/../../health")).data}catch(e){throw console.error("Failed to test connection:",e),Error("バックエンドとの接続に失敗しました")}}constructor(){this.axiosInstance=n.Z.create({baseURL:l,headers:{"Content-Type":"application/json"},timeout:1e4})}}let i=new o;function d(){let[e,s]=(0,t.useState)([]),[r,n]=(0,t.useState)(!1),[l,o]=(0,t.useState)(null),[d,c]=(0,t.useState)(""),[u,x]=(0,t.useState)(void 0),[m,g]=(0,t.useState)(void 0),[h,b]=(0,t.useState)(null),[p,j]=(0,t.useState)(null);(0,t.useEffect)(()=>{f()},[]);let f=async()=>{try{await i.testConnection(),b(!0)}catch(e){b(!1)}},D=async()=>{if(!d.trim()){o("メッセージを入力してください");return}n(!0),o(null);try{let e={customerMessage:d,...m&&{customerId:m},...u&&{preferredTone:u}},r=await i.generateResponseSuggestions(e);s(r.data.suggestions)}catch(e){o(e instanceof Error?e.message:"提案生成中にエラーが発生しました"),s([])}finally{n(!1)}},N=async e=>{try{await navigator.clipboard.writeText(e.content),j(e.id),setTimeout(()=>j(null),2e3)}catch(e){console.error("クリップボードへのコピーに失敗しました:",e)}};return(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"p-4 rounded-lg ".concat(null===h?"bg-yellow-50 border border-yellow-200":h?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-xl mr-3",children:null===h?"\uD83D\uDD04":h?"✅":"\uD83D\uDD0C"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:null===h?"接続確認中...":h?"サーバー接続OK":"サーバー接続エラー"}),!h&&null!==h&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"バックエンドサーバー (localhost:3333) に接続できません"})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"\uD83D\uDCAC 顧客メッセージ"}),(0,a.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),placeholder:"例：青島みかんを5kg注文したいです...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none",rows:4,disabled:!h}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"サンプルメッセージ (タップで入力):"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:["青島みかんを5kg注文したいです","前回のみかんがとても美味しかったです","配送に問題がありました","新商品について教えてください"].map((e,s)=>(0,a.jsxs)("button",{onClick:()=>c(e),disabled:!h,className:"text-left p-3 text-sm bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg transition-colors disabled:opacity-50",children:["\uD83D\uDCDD ",e]},s))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"⚙️ 設定 (任意)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"顧客選択"}),(0,a.jsxs)("select",{value:m||"",onChange:e=>g(e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",disabled:!h,children:[(0,a.jsx)("option",{value:"",children:"新規顧客"}),[{id:"customer-001",name:"田中さん"},{id:"customer-002",name:"佐藤さん"},{id:"customer-003",name:"山田さん"}].map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"返信のトーン"}),(0,a.jsxs)("select",{value:u||"",onChange:e=>x(e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",disabled:!h,children:[(0,a.jsx)("option",{value:"",children:"自動選択"}),[{value:"friendly",label:"フレンドリー",icon:"\uD83D\uDE0A"},{value:"professional",label:"プロフェッショナル",icon:"\uD83D\uDC54"},{value:"apologetic",label:"謝罪的",icon:"\uD83D\uDE4F"},{value:"enthusiastic",label:"熱心",icon:"\uD83C\uDF89"}].map(e=>(0,a.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))]})]})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:D,disabled:!d.trim()||r||!h,className:"px-8 py-4 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium text-lg rounded-lg transition-colors",children:r?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"生成中..."]}):"\uD83E\uDD16 提案生成"})}),l&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-red-800",children:["⚠️ ",l]})}),e.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"\uD83E\uDD16 AI提案返信文"}),(0,a.jsx)("div",{className:"space-y-4",children:e.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"friendly"===e.tone?"\uD83D\uDE0A":"professional"===e.tone?"\uD83D\uDC54":"apologetic"===e.tone?"\uD83D\uDE4F":"\uD83C\uDF89"}),(0,a.jsxs)("span",{className:"font-medium",children:["提案 ",s+1,": ","friendly"===e.tone?"フレンドリー":"professional"===e.tone?"プロフェッショナル":"apologetic"===e.tone?"謝罪的":"熱心"]})]}),(0,a.jsxs)("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded",children:["信頼度 ",Math.round(100*e.confidence),"%"]})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-md p-4 mb-3",children:(0,a.jsx)("p",{className:"text-gray-800 leading-relaxed whitespace-pre-wrap",children:e.content})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCA1 ",e.reasoning]}),(0,a.jsx)("button",{onClick:()=>N(e),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(p===e.id?"bg-green-100 text-green-800":"bg-orange-100 hover:bg-orange-200 text-orange-800"),children:p===e.id?"✅ コピー済み":"\uD83D\uDCCB コピー"})]})]},e.id))})]}),0===e.length&&!r&&!l&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-green-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"\uD83D\uDCCB 使い方"}),(0,a.jsxs)("div",{className:"space-y-2 text-gray-700",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"1."})," 顧客からのメッセージを入力（またはサンプルをタップ）"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"2."})," 必要に応じて顧客IDとトーンを設定"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"3."})," 「\uD83E\uDD16 提案生成」ボタンをタップ"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"4."})," 気に入った返信文の「\uD83D\uDCCB コピー」をタップ"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"5."})," LINE/メール/SMSアプリで貼り付けて送信"]})]})]})]})}function c(){return(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-orange-100 to-green-100",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("header",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"\uD83C\uDF4A 分身の返信"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"農家向け AI 返信文提案システム"}),(0,a.jsx)("div",{className:"mt-4 px-6 py-2 bg-orange-200 rounded-full inline-block",children:(0,a.jsx)("span",{className:"text-orange-800 font-semibold",children:"「ファンとの絆を、もっと強く、もっと楽に。」"})})]}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsx)(d,{})}),(0,a.jsx)("footer",{className:"text-center mt-12 text-gray-500",children:(0,a.jsx)("p",{children:"Built with ❤️ for farmers who care about their customers"})})]})})}}},function(e){e.O(0,[906,971,938,744],function(){return e(e.s=5835)}),_N_E=e.O()}]);